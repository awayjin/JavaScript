<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        #test{display: none}

    </style>
    <script type="text/javascript">
        function aa(){
            var iframe = document.getElementById("loadingIframe");
            if (iframe) {
                document.body.removeChild(iframe);
            }
            var loadingDiv = document.getElementById("loading");
            loadingDiv.style.display = '';
            var iframe = document.createElement("iframe");
            iframe.id = "loadingIframe";
//            iframe.src = "http://192.168.103.104:9200/bulletinct/exportannsecurity";
            iframe.style.display = 'none';

            var xhr = new XMLHttpRequest();
            xhr.onload = function(){
            console.log(111)
                loadingDiv.style.display = 'none';
            }
//            xhr.open("get", "http://192.168.98.108:9200/bulletinct/exportannsecurity", true);
            xhr.open("get", "a.php", true);

            xhr.send(null);
            document.body.appendChild(iframe);

//            iframe.onprogress = function(){
//                console.log(111)
//                loadingDiv.style.display = 'none';
//            }
            if (iframe.attachEvent){
                iframe.attachEvent("onload", function(){
                    alert("Local iframe is now loaded.");
                });
            } else {
                iframe.onload = function(){
                    //alert("Local iframe is now loaded.");
                    //document.body.removeChild(iframe);
                };
                iframe.onprogress = function(){
                    console.log(111)
                    loadingDiv.style.display = 'none';
                }

            }
//            iframe.onreadystatechange = function(){
//                var readyState = this.readyState;
//                console.log(readyState);
//                if(readyState == 'load' || readyState == 'complete'){
//                    loadingDiv.style.display = 'none';
//                }
//            }



        }
    </script>
</head>
<body>
<img src="D:/360_pic/360wallpaper.jpg">
<img src="../../../360wallpaper.jpg">
<input type="button" value="点我" onclick="aa()">

<div id="loading" style="height: 500px; width: 500px; background-color: #01AAEE; display: none;">loading</div>
</body>
</html>