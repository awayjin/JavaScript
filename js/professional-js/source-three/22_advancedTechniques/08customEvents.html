<<<<<<< HEAD
=======
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>自定义事件</title>
</head>
<script src="../../jquery-1.7.1.js"></script>

<body>

<script>
function CustomEvent(){
    this.handlers = {};
}
CustomEvent.prototype = {
    //添加事件处理程序
    addHandler: function(e, method){
        if(typeof this.handlers[e] ==  'undefined'){
            this.handlers[e] = [];
        }
        this.handlers[e].push(method);
    },

    //触发事件处理程序
    fire: function(obj){
        var arrHandle = this.handlers[obj.type];
        if(arrHandle instanceof Array){
            for(var i=0; i<arrHandle.length; i++){
                arrHandle[i](obj);
            }
        }
    },

    //删除事件处理程序
    removeHandler: function(type, func){
        if(this.handlers[type] instanceof Array){
            var arrHandler = this.handlers[type];
            for(var i=0; i<arrHandler.length; i++){
                if(arrHandler[i] == func){
                    break;
                }
            }
            arrHandler.splice(i, 1);

        }
    }
};
var target = new CustomEvent();
    target.addHandler("msgEvent", messageFunc);
    target.addHandler("msgEvent", messageFunc);
//    target.fire({ type: "msgEvent", msg: "text reed." });
//    target.fire({ type: "msgEvent", msg: "text reed." });
    target.removeHandler("msgEvent", messageFunc);//remove
//    target.fire({ type: "msgEvent", msg: "text reed." }); //不再触发

function messageFunc(e){
    alert(e.msg)
}
function messageFunc2(e){
    alert(e.msg)
}
</script>


<script>
    $("body").bind("me.custom", function(e, obj){
        console.log("test loom gloom:", obj);
    })
    $("body").trigger("me.custom", {'ss': '22',aa:  222, cc: 333});

    for(var i=0; i<4; i++){
        if(i/2 == 0){
            break;
        }
    }
//    alert(i)
</script>
</body>
</html>
>>>>>>> 707646eb6d1de71aa3298d4aa50c758145faa798
