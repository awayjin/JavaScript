# 第6章　函数、谓词、 各种各样的函数

## 6-1 各种各样的函数
所谓函数，就是输入某一值得到相应输出结果的功能，输入值称为参数（parameter） ，输出值称为返回值。

函数大致可以分为以下几种:
- 算术函数（用来进行数值计算的函数）
- 字符串函数（用来进行字符串操作的函数）
- 日期函数（用来进行日期操作的函数）
- 转换函数（用来转换数据类型和值的函数）
- 聚合函数（用来进行数据聚合的函数）.聚合函数基本上只包含 COUNT、 SUM、 AVG、 MAX、 MIN 这 5 种

1. 算术函数
加减乘除四则运算    

2. ABS——绝对值

3. MOD——求余
MOD 是计算除法余数（求余）的函数，是 modulo 的缩写

4. ROUND——四舍五入


### 字符串函数
- concat ||——拼接
进行字符串拼接时，如果其中包含 NULL，那么得到的结果也是 NULL。

- 字符串长度
length(str)

- LOWER——小写转换

- REPLACE——字符串的替换
REPLACE(对象字符串，替换前的字符串，替换后的字符串)

- SUBSTRING——字符串的截取
SUBSTRING（对象字符串 FROM 截取的起始位置 FOR 截取的字符数）


### 日期函数

SELECT CURRENT_DATE;
SELECT CURRENT_TIME;
SELECT current_timestamp;

- EXTRACT——截取日期元素

### 转换函数

- CAST——类型转换， CAST（转换前的值 AS 想要转换的数据类型）

- COALESCE——将NULL转换为其他值


## 6-2 谓词
- 谓词就是返回值为真值的函数。
- 掌握LIKE的三种使用方法（前方一致、中间一致、后方一致）。
- 需要注意BETWEEN包含三个参数。
- 想要取得NULL数据时必须使用IS NULL。
- 可以将子查询作为IN和EXISTS的参数


### 什么是谓词
 SQL 的抽出条件中不可或缺的工具——谓词（ predicate）
 
 通俗来讲谓词就函数中的一种，是需要满足特定条件的函数，该条件就是返回值是真值。谓词的返回值全都是真值（ TRUE/ FALSE/UNKNOWN）。这也是谓词和函数的最大区别

### LIKE谓词——字符串的部分一致查询
当需要进行字符串的部分一致查询时需要使用该谓词

-- 前方一致
SELECT * FROM sample_like WHERE strcol like 'ddd%';

-- 其中的 % 是代表“ 0 字符以上的任意字符串”的特殊符号

### BETWEEN谓词——范围查询
select * FROM Product WHERE sale_price between 1000 and 3000;

## IS NULL、 IS NOT NULL——判断是否为NULL
```
select * FROM Product WHERE purchase_price is null;
select * FROM Product WHERE purchase_price is not null;
```

### IN谓词——OR的简便用法

SELECT product_name, purchase_price
FROM Product
WHERE purchase_price NOT IN (320, 500, 5000);

### 使用子查询作为IN谓词的参数

- IN和子查询.

IN 谓词（ NOT IN 谓词）具有其他谓词所没有的用法，那就是可以
使用子查询作为其参数。

子查询就是 SQL 内部生成的表，因此也可以说“能够将表作为 IN 的参数”。同理，我们还可以说“能够将视图作为 IN 的参数”。


### EXIST谓词