<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <script src="jquery-1.7.1.js"></script>
</head>
<body>
<img data-src="images/1.png" data-after="2000" src="images/number.jpg">
<img data-src="2.png" data-after="2000" src="images/number.jpg">
<img data-src="3.png" src="images/number.jpg">
<img data-src="4.png" data-after="3000" src="images/number.jpg">

<script>
    $("img").each(function(){
        var element = $(this);
        var src = element.attr("data-src");
        var after= element.attr("data-after");

        if( src ){

            $.when(
            ).then();

        }


    });

//    $( "img" ).each(function() {
//        var element = $( this ),
//                src = element.attr( "data-src" ),
//                after = element.attr( "data-after" );
//        if ( src ) {
//            $.when(
//                          //  $.loadImage( src ),
//                          //  $.afterDOMReady( after )
//                    ).then(function() {
//                        element.attr( "src", src );
//                    }, function() {
//                        element.attr( "src", "error.png" );
//                    } ).done(function() {
//                        element.fadeIn();
//                    });
//        }
//    });

    $.get("test1.php").done(function(e){
        alert("OK"+ e)
    });
</script>

</body>
</html>