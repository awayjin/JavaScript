<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Ajax</title>
<script type="text/javascript" src="../jquery-1.5.1.js"></script>
<style type="text/css">
html, body {
  margin: 0;
  padding: 0;
}
body { 
  font: 62.5% Arial, Verdana, sans-serif; 
} 
#container {
  font-size: 1.2em;
  margin: 10px 2em;
}

h1 { 
  font-size: 2.5em; 
  margin-bottom: 0; 
} 
h2 { 
  font-size: 1.3em; 
  margin-bottom: .5em; 
} 

#header {
  margin-bottom: 1em;
  padding-bottom: 1em;
  border-bottom: 1px solid #eee;
}


.letters {
  float: left;
  width: 150px;
  padding-right: 10px;
  border-right: 1px solid #eee;
  margin-right: 10px;
}

.letter {
  margin: 10px;
}
.letter h3 {
  font-weight: bold;
}

.letter ul {
  list-style: none;
  padding: 0;
  margin: 0 1em;
}

.letter input {
  width: 100%;
  margin-bottom: 1em;
}


#dictionary {
  float: left;
  width: 550px;
}

.entry {
  padding: 1em 0em;
  border-bottom: 1px solid #eee;
}
.entry .term {
  display: inline;
  font-weight: bold;
}
.entry .part {
  padding: 0 1em;
  display: inline;
  font-style: italic;
}
.entry .definition {
  padding: .5em;
}
.entry .definition .quote {
  margin: .5em 2em;
  padding: 0 1em;
  color: #333;
  border-left: 2px #eee solid;
}
.entry .definition .quote .quote-author {
  font-weight: bold;
  margin-left: 20em;
}

#loading {
  border: 1px #000 solid;
  background-color: #eee;
  padding: 20px;
  margin: 100px 0 0 300px;
  position: absolute;
  display: none;
}

.highlighted {
	text-decoration:underline
  background-color: #dfd;
  font-style: italic;
}


</style>
</head>

<body>

<script>
	$("p").contents()
	.filter(function(){ 
		return this.nodeType != 1; 
	})
	.wrap("<a href='####'></a>");

var text = '.熟悉windows server，iis；';
var s = text.replace("ser", 'cao  ');
</script>

 <div id="container">
      <div id="header">
        <h2>The Devil's Dictionary</h2>
        <div class="author">by Ambrose Bierce</div>
      </div>
      
        <div class="letters">
                <div class="letter" id="letter-a">
                  <h3><a href="#">A</a></h3>
                </div>
                <div class="letter" id="letter-b">
                  <h3><a href="#">B</a></h3>
                </div>
                <div class="letter" id="letter-c">
                  <h3><a href="#">C</a></h3>
                </div>
                <div class="letter" id="letter-d">
                  <h3><a href="#">D</a></h3>
                </div>
                
               <div class="letter" id="letter-e">
                  <h3>E</h3>
                  <ul>
                 	  <li><a href="e.php?term=Eavesdrop">Eavesdrop</a></li>
                      <li><a href="#">Edible</a></li>	
                      <li><a href="#">aa&nbsp;</a> 
                  </ul>
               </div>   
               
               <div class="letter" id="letter-f">
               		<h3>F</h3>
                    <form>
                    	<input type="text" id="term" value="" name="t_value" />
                        <input type="submit" name="search" value="search" id="serch" />
                    </form>
               </div>
               
               <div class="letter" id="letter-g">
               	   	<h3><a href="#">G</a></h3>
               </div>
                
        </div>  
              
       <div id="dictionary">
       		<div>123</div>
       </div>
</div>      

<script type="text/javascript">
var string = "select * from mytable inner join tab2 on mytable.col1=tab2.col1";
var pattern = /[\w]*from\s+([\w]*)\s+[\w]*/i;
var matches = pattern.exec(string);
//alert(matches[1]); //取得表名

$(document).ready(function(){
	//a.html 取得部分限定内容
	$("#letter-a a").click(function(){ 
		$("#dictionary").empty().hide().load("a.html", function(){
			$(this).fadeIn(1000);	
		});
//		$("#dictionary").empty().hide().load("a.html", function(){
//			$(this).fadeIn(1000);
//		});
		//$("#dictionary").load("a.html"); //a.html 加载的是html片段
		return false;
	});
});

$("#letter-b a").click(function(){
	//b.json getJSON 全局函数(类方法) 加载json数据
	$.getJSON("b.json", function(data){ //data 原始数据是数组
		//alert(data);
		$("#dictionary").empty();
		$.each(data, function(entryIndex, entry){
			var html = '<div class="entry">';
			html += '<h3 class="term">' + entry['term'] + '</h3>';
			html += '<div class="part">' + entry['part'] + '</div>';
			html += '<div class="definition">';
			html +=entry['definition'];		
			if(entry['quote']){
				html +='<div class="quote">'
				$.each(entry['quote'], function(index, value){
					 html +='<div class="quote-line">' +  value + '</div>';
				});	
				if(entry['author']){
					html +=	'<div class="quote-author">' + entry['author'] + '';
				}
				html += '</div>';
			}
			html += '</div>';
			html += '</div>';
			$("#dictionary").append(html);
		});
		
		/* //
		var items = []; //data原始数据是对象
		$.each(data, function(key, val){
			//items.push("<li class='"+index+"'>"+value+"</li>");
			items.push("<li id='" + key + "'>" + val + "</li>");
		});
		//$(""+items+"").insertBefore("#dictionary");
		$("<ul/>",{
			'class': 'jin-text',
			'id': 'jin-id',
			'html': items.join('')	
		}).appendTo("#dictionary");*/
		 
		/*
		{
		  "one": "Singular sensation",
		  "two": "Beady little eyes",
		  "three": "Little birds pitch by my doorstep"
		}
		*/
	});
	return false; 
});

$("#letter-c a").click(function(){
	//c.js 直接加载js
	/*$.getScript("c.js", function(){
		alert(23)
	});*/
	$.getScript("c.js");
	return false; 
});

$("#letter-d a").click(function(){
	//d.xml
	$.get("d.xml", function(data){
		$("#dictionary").empty();
		//alert(data); //[object XMLDocument]
		//alert($(data).find("entry"))
		$(data).find("entry").each(function(){
			var $entry = $(this);
			var html = '<div class="entry">';
			html += '<h3 class="term">' + $entry.attr('term') + '</h3>';
			//html += '<h3 class="term">' + $entry.attr('term') + '</h3>';
			html += '<div class="part">' + $entry.attr('part') + '</div>';
			html += '<div class="definition">';
			html += $entry.find('definition').text();
			var $quote = $entry.find('quote');
			if ($quote.length) {
			  html += '<div class="quote">';
			  $quote.find('line').each(function() {
				html += '<div class="quote-line">' + $(this).text() + '</div>';
			  });
			  if ($quote.attr('author')) {
				html += '<div class="quote-author">' + $quote.attr('author') + '</div>';
			  }
			  html += '</div>';
			}
			html += '</div>';
			html += '</div>';
			$('#dictionary').append($(html));
		})
	});
});

$(document).ready(function(){
	//e.php
	$("#letter-e li a").click(function(){
		$.post("e.php", {"term": $(this).text()}, function(data){
			$("#dictionary").html(data)	
		}, "html");	
		return false;//这个防止a标签默认连接
	});
	
	//$("#letter-e a").click(function(){
	//	$.get("e.php", {'term': $(this).text()}, function(data){
	//		$('#dictionary').html(data);
	//	});
	//	return false; //这个要加上	
	//});
});

$(document).ready(function(){
	//f.php 搜索
	$("#letter-f form").submit(function(){
		$.get("f.php", $(this).serialize(), function(data){
			$("#dictionary").html(data);	
		});	
		return false;
	});
//	$("#letter-f form").submit(function(){
//		$("#dictionary").load("f.php", {"term": $("input[name='term']").val() }, function(data){
//			//alert(data);	
//		});	
//		return false
//	});
	

});

$(document).ready(function(){
	//ajax和事件
	$('.term').live("click", function(){
		$(this).siblings('.definition').slideToggle();
	});	
});



/*$.getJSON('ajax/test.json', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val + '</li>');
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
});*/


var arr = new Array(3)
arr[0] = "George"
arr[1] = "John"
arr[2] = "Thomas"

document.write(arr.join("________"))
</script> 
<script type="text/javascript">
//载入中
$(function(){
	$('<div id="loading">loading....</div>').insertBefore("#dictionary")
	.ajaxStart(function(){ $(this).show(); })
	.ajaxStop(function(){ $(this).hide(); });

});


</script>   

<script type="text/javascript">
//载入远程js
//$(document.createElement("script"))
//.attr("src", "http://www.gtadata.com/CSS/stm31.js")
//.appendTo("head");

//$(document.createElement('script')).attr('src', 'http://www.gtadata.com/CSS/stm31.js"').appendTo('head');

</script>
</body>
</html>

<script type="text/javascript">
//html += '<h3 class="term">' + entry['term'] + '</h3>';

var arrJson = [
  {
	"term": "Jin",
    "part": "1part.a",
    "definition": "A Bird.",
	"quote":[
		"run",
		"eat"
	],
	"author":"jinwei"
  
  },
  {
	 "term": "Wei",
	  "part": "2part.b",
	  "definition": "Big turtle!"
  }
];

var arrObject = {
		  "one": "Singular sensation",
		  "two": "Beady little eyes",
		  "three": "Little birds pitch by my doorstep"
		};
//alert(arrObject['one']);
//alert(arrJson[0]['quote'])

$.each(arrJson, function(entryIndex, entry){
		//alert(entry['term'])
});
</script>