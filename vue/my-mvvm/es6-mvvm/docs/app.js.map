{"version":3,"sources":["webpack:///app.js","webpack:///webpack/bootstrap 77d05b30ec832f634764","webpack:///./src/core/observer/watcher.js","webpack:///./src/core/observer/dep.js","webpack:///./src/core/util/debug.js","webpack:///./src/shared/util.js","webpack:///./src/core/util/env.js","webpack:///./src/core/observer/index.js","webpack:///./example/main.js","webpack:///./src/core/index.js","webpack:///./src/core/instance/index.js","webpack:///./src/core/util/lang.js","webpack:///./src/core/util/error.js","webpack:///./src/core/instance/init.js","webpack:///./src/core/instance/state.js","webpack:///./src/compiler/index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","Watcher","vm","expOrFn","cb","options","arguments","length","undefined","this","depIds","newDepIds","_watchers","push","lazy","dirty","parseGetter","value","__WEBPACK_IMPORTED_MODULE_0__dep__","__WEBPACK_IMPORTED_MODULE_1__util_index__","constructor","update","run","oldVal","addDep","dep","id","addSub","cleanupDeps","evaluate","depend","_this","keys","forEach","key","_this2","removeSub","create","exp","test","exps","split","obj","len","Dep","uid","subs","pushTarget","_target","target","targetStack","popTarget","pop","sub","index","indexOf","splice","notify","__WEBPACK_IMPORTED_MODULE_0__lang__","__WEBPACK_IMPORTED_MODULE_3__error__","__WEBPACK_IMPORTED_MODULE_4_src_shared_util__","warn","__WEBPACK_IMPORTED_MODULE_0_src_shared_util__","NODE_ENV","msg","hasConsole","config","silent","console","error","isPlainObject","_toString","isObject","_typeof","noop","hasOwn","Symbol","iterator","toString","inBrowser","window","Observer","vmCount","Array","isArray","walk","defineReactive","val","getOwnPropertyDescriptor","setter","set","childOb","observe","newVal","asRootData","ob","__ob__","__WEBPACK_IMPORTED_MODULE_0_mvvm__","el","template","data","word","user","firstname","lastname","computed","fullname","methods","sayHi","__WEBPACK_IMPORTED_MODULE_0__instance_index__","version","MVVM","_init","__WEBPACK_IMPORTED_MODULE_0_src_core_observer_watcher__","__WEBPACK_IMPORTED_MODULE_2__init__","$watch","isReserved","str","charCodeAt","def","writable","handleError","err","info","__WEBPACK_IMPORTED_MODULE_1__debug__","__WEBPACK_IMPORTED_MODULE_0__env__","initMixin","_uid","_isMVVM","$options","__WEBPACK_IMPORTED_MODULE_0__state__","$compile","__WEBPACK_IMPORTED_MODULE_1_src_compiler_index__","document","body","proxy","sourceKey","sharedPropertyDefinition","initState","opts","initData","__WEBPACK_IMPORTED_MODULE_0__observer_index__","_data","initComputed","getData","__WEBPACK_IMPORTED_MODULE_3__util_index__","props","watchers","_computedWatchers","userDef","__WEBPACK_IMPORTED_MODULE_1__observer_watcher__","computedWatcherOptions","defineComputed","createComputedGetter","cache","watcher","__WEBPACK_IMPORTED_MODULE_2__observer_dep__","e","Compile","$vm","$el","isElementNode","querySelector","$template","$fragment","template2Fragment","node2Fragment","init","appendChild","__WEBPACK_IMPORTED_MODULE_0__core_observer_watcher__","createFragment","html","child","fragment","createDocumentFragment","createElement","innerHTML","firstChild","charAt","tagName","compileElement","childNodes","slice","node","text","textContent","reg","compile","isTextNode","compileText","RegExp","$1","nodeAttrs","attributes","attr","attrName","isDirective","dir","substring","isEventDirective","compileUtil","eventHandler","removeAttribute","nodeType","bind","model","me","_getVMVal","addEventListener","newValue","_setVMVal","class","updaterFn","updater","oldValue","eventType","fn","k","textUpdater","htmlUpdater","classUpdater","className","replace","space","String","modelUpdater"],"mappings":"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","file":"app.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 7);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dep__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_index__ = __webpack_require__(2);\n\n\n\n/**\n * \n * 观察员\n * @param {any} vm \n * @param {any} expOrFn \n * @param {any} cb \n * @param {any} options \n */\nfunction Watcher(vm, expOrFn, cb) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  this.cb = cb;\n  this.vm = vm;\n  this.expOrFn = expOrFn;\n  this.depIds = {};\n  this.newDepIds = {};\n\n  vm._watchers.push(this);\n  this.lazy = !!options.lazy;\n  this.dirty = this.lazy;\n\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = this.parseGetter(expOrFn);\n  }\n\n  // 观察员 value\n  this.value = this.lazy ? undefined : this.get();\n}\n\nWatcher.prototype = {\n  constructor: Watcher,\n  update: function update() {\n    // 如果为计算属性的watcher，则延缓更新。设置数据为dirty\n    if (this.lazy) {\n      this.dirty = true;\n    } else {\n      // 数据对象直接更新\n      this.run();\n    }\n  },\n  // 非计算属性获取value\n  run: function run() {\n    var value = this.get();\n    var oldVal = this.value;\n    if (value !== oldVal) {\n      this.value = value;\n      // 更新视图的指令\n      this.cb.call(this.vm, value, oldVal);\n    }\n  },\n\n  /**\n   * watcher 观察员 加入到某个被观察数据集合中\n   * @param {Dep} dep\n   */\n  addDep: function addDep(dep) {\n    // 1. 每次调用run()的时候会触发相应属性的getter\n    // getter里面会触发dep.depend()，继而触发这里的addDep\n    // 2. 假如相应属性的dep.id已经在当前watcher的depIds里，说明不是一个新的属性，仅仅是改变了其值而已\n    // 则不需要将当前watcher添加到该属性的dep里\n    // 3. 假如相应属性是新的属性，则将当前watcher添加到新属性的dep里\n    // 如通过 vm.child = {name: 'a'} 改变了 child.name 的值，child.name 就是个新属性\n    // 则需要将当前watcher(child.name)加入到新的 child.name 的dep里\n    // 因为此时 child.name 是个新值，之前的 setter、dep 都已经失效，如果不把 watcher 加入到新的 child.name 的dep中\n    // 通过 child.name = xxx 赋值的时候，对应的 watcher 就收不到通知，等于失效了\n    // 4. 每个子属性的watcher在添加到子属性的dep的同时，也会添加到父属性的dep\n    // 监听子属性的同时监听父属性的变更，这样，父属性改变时，子属性的watcher也能收到通知进行update\n    // 这一步是在 this.get() --> this.getVMVal() 里面完成，forEach时会从父级开始取值，间接调用了它的getter\n    // 触发了addDep(), 在整个forEach过程，当前wacher都会加入到每个父级过程属性的dep\n    // 例如：当前watcher的是'child.child.name', 那么child, child.child, child.child.name这三个属性的dep都会加入当前watcher\n    if (!Object(__WEBPACK_IMPORTED_MODULE_1__util_index__[\"c\" /* hasOwn */])(this.newDepIds, dep.id)) {\n      this.newDepIds[dep.id] = dep;\n      if (!Object(__WEBPACK_IMPORTED_MODULE_1__util_index__[\"c\" /* hasOwn */])(this.depIds, dep.id)) {\n        dep.addSub(this);\n        this.depIds[dep.id] = dep;\n      }\n    }\n  },\n\n  /**\n   * Evaluate the getter, and re-collect dependencies.\n   */\n  get: function get() {\n    // 设置当前的 Watcher \n    Object(__WEBPACK_IMPORTED_MODULE_0__dep__[\"c\" /* pushTarget */])(this);\n    var vm = this.vm;\n\n    // 获取value的同时\n    // 为数据的观察者添加watcher\n    // 如果为computed 计算属性, 则会出发内部多次的 getter 调用\n    // 则内部的数据观察对象会收集同一个 watcher\n    var value = this.getter && this.getter.call(vm, vm);\n\n    Object(__WEBPACK_IMPORTED_MODULE_0__dep__[\"b\" /* popTarget */])();\n    this.cleanupDeps();\n    return value;\n  },\n  /**\n   * Evaluate the value of the watcher.\n   * This only gets called for lazy watchers.\n   */\n  evaluate: function evaluate() {\n    this.value = this.get();\n    this.dirty = false;\n  },\n\n  /**\n   * Depend on all deps collected by this watcher.\n   */\n  depend: function depend() {\n    var _this = this;\n\n    var maps = Object.keys(this.depIds);\n    maps.forEach(function (key) {\n      _this.depIds[key].depend();\n    });\n  },\n  /**\n   * Clean up for dependency collection.\n   */\n  cleanupDeps: function cleanupDeps() {\n    var _this2 = this;\n\n    var keys = Object.keys(this.depIds);\n    keys.forEach(function (key) {\n      var dep = _this2.depIds[key];\n      // 删除旧的观察者依赖\n      if (!Object(__WEBPACK_IMPORTED_MODULE_1__util_index__[\"c\" /* hasOwn */])(_this2.newDepIds, dep.id)) {\n        dep.removeSub(_this2);\n      }\n    });\n\n    this.depIds = this.newDepIds;\n    this.newDepIds = Object.create(null);\n  },\n  parseGetter: function parseGetter(exp) {\n    if (/[^\\w.$]/.test(exp)) {\n      return;\n    }\n    var exps = exp.split('.');\n\n    /**\n     * @param {object} obj\n     */\n    return function (obj) {\n      for (var i = 0, len = exps.length; i < len; i++) {\n        if (!obj) return;\n        obj = obj[exps[i]];\n      }\n      return obj;\n    };\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Watcher);\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = pushTarget;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = popTarget;\nvar uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n * 观察员允许多个指令订阅者订阅\n */\n\nfunction Dep(name) {\n  this.id = uid++;\n  this.subs = [];\n}\n\nDep.prototype = {\n\n  constructor: Dep,\n\n  /**\n   * @param {Wathcer} sub\n   */\n  addSub: function addSub(sub) {\n    this.subs.push(sub);\n  },\n\n  removeSub: function removeSub(sub) {\n    var index = this.subs.indexOf(sub);\n    if (index != -1) {\n      this.subs.splice(index, 1);\n    }\n  },\n\n  // 数据对象 注入 comipler 的 watcher\n  // 如果是计算属性的 watcher, 则会多个数据对象 注入一个watcher\n  depend: function depend() {\n    if (Dep.target) {\n      Dep.target.addDep(this);\n    }\n  },\n\n  notify: function notify() {\n    this.subs.forEach(function (sub) {\n      sub.update();\n    });\n  }\n};\n\n// the current target watcher being evaluated.\n// this is globally unique because there could be only one\n// watcher being evaluated at any time.\nDep.target = null;\n\nvar targetStack = [];\n\nfunction pushTarget(_target) {\n  if (Dep.target) {\n    targetStack.push(Dep.target);\n  }\n  Dep.target = _target;\n}\n\nfunction popTarget() {\n  Dep.target = targetStack.pop();\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Dep);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lang__ = __webpack_require__(10);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__lang__[\"a\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return __WEBPACK_IMPORTED_MODULE_0__lang__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__debug__ = __webpack_require__(3);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__env__ = __webpack_require__(5);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__error__ = __webpack_require__(11);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_3__error__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_src_shared_util__ = __webpack_require__(4);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_4_src_shared_util__[\"a\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_4_src_shared_util__[\"b\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_4_src_shared_util__[\"c\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return __WEBPACK_IMPORTED_MODULE_4_src_shared_util__[\"d\"]; });\n\n\n\n\n\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return warn; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_src_shared_util__ = __webpack_require__(4);\n\n\nvar warn = __WEBPACK_IMPORTED_MODULE_0_src_shared_util__[\"d\" /* noop */];\n\nif (\"development\".NODE_ENV !== 'production') {\n\n  warn = function warn(msg, vm) {\n    if (hasConsole && !config.silent) {\n      console.error('[MVVM warn]: ' + msg);\n    }\n  };\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export extend */\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = isPlainObject;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = isObject;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = noop;\n/* unused harmony export makeMap */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = hasOwn;\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/** @module shared/util */\n\nvar _toString = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Mix properties into target object.\n */\nfunction extend(to, _from) {\n  for (var key in _from) {\n    to[key] = _from[key];\n  }\n  return to;\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nfunction isPlainObject(obj) {\n  return _toString.call(obj) === '[object Object]';\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nfunction isObject(obj) {\n  return obj !== null && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object';\n}\n\n/**\n * Perform no operation.\n */\nfunction noop() {}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nfunction makeMap(str, expectsLowerCase) {\n  var map = Object.create(null);\n  var list = str.split(',');\n  for (var i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return expectsLowerCase ? function (val) {\n    return map[val.toLowerCase()];\n  } : function (val) {\n    return map[val];\n  };\n}\n\n/**\n * Check whether the object has the property.\n */\nfunction hasOwn(obj, key) {\n  return hasOwnProperty.call(obj, key);\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return inBrowser; });\n// Browser environment sniffing\nvar inBrowser = typeof window !== 'undefined';\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export defineReactive */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = observe;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dep__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_index__ = __webpack_require__(2);\n\n\n\nfunction Observer(value) {\n  this.value = value;\n\n  // value 对象观察类, \n  this.dep = new __WEBPACK_IMPORTED_MODULE_0__dep__[\"a\" /* default */]();\n\n  this.vmCount = 0; // number of vms that has this object as root $data\n  Object(__WEBPACK_IMPORTED_MODULE_1__util_index__[\"a\" /* def */])(value, '__ob__', this);\n\n  if (Array.isArray(value)) {\n    // TODO: observeArray\n  } else {\n    this.walk(value);\n  }\n}\n\nObserver.prototype = {\n  constructor: Observer,\n  walk: function walk(obj) {\n    var keys = Object.keys(obj);\n    for (var i = 0; i < keys.length; i++) {\n      defineReactive(obj, keys[i], obj[keys[i]]);\n    }\n  }\n};\n\n/**\n * Define a reactive property on an Object.\n */\nfunction defineReactive(obj, key, val) {\n\n  // 非对象属性观察类\n  var dep = new __WEBPACK_IMPORTED_MODULE_0__dep__[\"a\" /* default */]();\n\n  var property = Object.getOwnPropertyDescriptor(obj, key);\n\n  if (property && property.configurable === false) {\n    return;\n  }\n\n  // cater for pre-defined getter/setters\n  var getter = property && property.get;\n  var setter = property && property.set;\n\n  // 深度观察\n  var childOb = observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter() {\n      var value = getter ? getter.call(obj) : val;\n      if (__WEBPACK_IMPORTED_MODULE_0__dep__[\"a\" /* default */].target) {\n        // 将当前的 watcher 观察员 传递至数据对象的观察集合中\n        // 如果已经存在于数据集合中, 则忽略\n        dep.depend();\n        if (childOb) {\n          // 将当前的 watcher 传递给子对象的 数据对象的观察员集合\n          childOb.dep.depend();\n        }\n      }\n      return val;\n    },\n    set: function reactiveSetter(newVal) {\n      var value = getter ? getter.call(obj) : val;\n      if (newVal === value || newVal !== newVal && value !== value) {\n        return;\n      }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n\n      // 如果为对象，则创建新的 __ob__ 对象\n      childOb = observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * 为 对象 内置 __ob__ 观察员\n * 已存在观察员\n */\nfunction observe(value, asRootData /* 是否为rootData */) {\n  if (!Object(__WEBPACK_IMPORTED_MODULE_1__util_index__[\"d\" /* isObject */])(value)) {\n    return;\n  }\n  var ob = void 0;\n  if (Object(__WEBPACK_IMPORTED_MODULE_1__util_index__[\"c\" /* hasOwn */])(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__;\n  } else {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob;\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (Observer);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mvvm__ = __webpack_require__(8);\n\n\nvar template = '\\n<h2>Welcome {{user.firstname}} <span>{{user.lastname}}</span></h2>\\n<p>computed: {{fullname}}</p>\\n<input type=\"text\" v-model=\"user.lastname\">\\n<button v-on:click=\"sayHi\">change model</button>\\n';\n\nvar vm = new __WEBPACK_IMPORTED_MODULE_0_mvvm__[\"a\" /* default */]({\n  el: '#app',\n  template: template,\n  data: {\n    word: 'Hello World!',\n    user: {\n      firstname: '李',\n      lastname: '彦龙'\n    }\n  },\n  computed: {\n    fullname: function fullname() {\n      // getter 调用\n      return this.user.firstname + ' ' + this.user.lastname;\n    }\n  },\n  methods: {\n    sayHi: function sayHi() {\n      this.word = 'Hi, everybody!';\n    }\n  }\n});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__instance_index__ = __webpack_require__(9);\n\n\n// add prototype\nObject.defineProperty(__WEBPACK_IMPORTED_MODULE_0__instance_index__[\"a\" /* default */].prototype, '$isServer', {\n  get: function get() {\n    return typeof window === 'undefined';\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0__instance_index__[\"a\" /* default */].version = '1.0.0';\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__instance_index__[\"a\" /* default */]);\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_src_core_observer_watcher__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_src_core_observer__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__init__ = __webpack_require__(12);\n\n\n\n\n/**\n * Create a MVVM\n * @class\n */\nfunction MVVM(options) {\n    if (\"development\".NODE_ENV !== 'production' && !(this instanceof MVVM)) {\n        console.warn('Vue is a constructor and should be called with the `new` keyword');\n    }\n    this._init(options);\n}\n\nMVVM.prototype = {\n    constructor: MVVM,\n    $watch: function $watch(key, cb, options) {\n        new __WEBPACK_IMPORTED_MODULE_0_src_core_observer_watcher__[\"a\" /* default */](this, key, cb);\n    }\n};\n\nObject(__WEBPACK_IMPORTED_MODULE_2__init__[\"a\" /* default */])(MVVM);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (MVVM);\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = isReserved;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = def;\n\n/**\n * Check if a string starts with $ or _\n */\nfunction isReserved(str) {\n  var c = (str + '').charCodeAt(0);\n  return c === 0x24 || c === 0x5F;\n}\n\n/**\n * Define a property.\n */\nfunction def(obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  });\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = handleError;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__env__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__debug__ = __webpack_require__(3);\n\n\n\nfunction handleError(err, vm, info) {\n\n  if (\"development\".NODE_ENV !== 'production') {\n    Object(__WEBPACK_IMPORTED_MODULE_1__debug__[\"a\" /* warn */])('Error in ' + info + ': \"' + err.toString() + '\"', vm);\n  }\n  /* istanbul ignore else */\n  if (__WEBPACK_IMPORTED_MODULE_0__env__[\"a\" /* inBrowser */] && typeof console !== 'undefined') {\n    console.error(err);\n  } else {\n    throw err;\n  }\n}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = initMixin;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__state__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_src_compiler_index__ = __webpack_require__(14);\n\n\n\nvar uid = 0;\n\nfunction initMixin(MVVM) {\n\n  MVVM.prototype._init = function (options) {\n    var vm = this;\n    vm._uid = uid++;\n    vm._isMVVM = true;\n    vm.$options = options || {};\n\n    Object(__WEBPACK_IMPORTED_MODULE_0__state__[\"a\" /* initState */])(vm);\n    this.$compile = new __WEBPACK_IMPORTED_MODULE_1_src_compiler_index__[\"a\" /* default */](this.$options.el || document.body, this);\n  };\n}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export proxy */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = initState;\n/* unused harmony export defineComputed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__observer_index__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__observer_watcher__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__observer_dep__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util_index__ = __webpack_require__(2);\n\n\n\n\n\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: __WEBPACK_IMPORTED_MODULE_3__util_index__[\"g\" /* noop */],\n  set: __WEBPACK_IMPORTED_MODULE_3__util_index__[\"g\" /* noop */]\n};\n\n/**\n * 属性代理\n * target[sourceKey].key => target.key\n */\nfunction proxy(target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter() {\n    return this[sourceKey][key];\n  };\n  sharedPropertyDefinition.set = function proxySetter(val) {\n    this[sourceKey][key] = val;\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction initState(vm) {\n  var opts = vm.$options;\n\n  // new Watcher(vm) to push vm._watchers\n  vm._watchers = [];\n\n  if (opts.data) {\n    initData(vm);\n  } else {\n    Object(__WEBPACK_IMPORTED_MODULE_0__observer_index__[\"a\" /* observe */])(vm._data = {}, true /* asRootData */);\n  }\n\n  if (opts.computed) {\n    initComputed(vm, opts.computed);\n  }\n}\n\n/**\n * 代理 vm._data.xxx 属性 为 vm.xxx\n * 给 vm._data 属性遍历, 设置为观察者\n */\nfunction initData(vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function' ? getData(data, vm) : data || {};\n  if (!Object(__WEBPACK_IMPORTED_MODULE_3__util_index__[\"e\" /* isPlainObject */])(data)) {\n    data = {};\n    \"development\".NODE_ENV !== 'production' && warn('data functions should return an object:\\n' + 'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function', vm);\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n\n    if (\"development\".NODE_ENV !== 'production') {\n      if (methods && Object(__WEBPACK_IMPORTED_MODULE_3__util_index__[\"c\" /* hasOwn */])(methods, key)) {\n        warn('method \"' + key + '\" has already been defined as a data property.', vm);\n      }\n    }\n\n    // 优先处理prop属性\n    if (props && Object(__WEBPACK_IMPORTED_MODULE_3__util_index__[\"c\" /* hasOwn */])(props, key)) {\n      \"development\".NODE_ENV !== 'production' && warn('The data property \"' + key + '\" is already declared as a prop. ' + 'Use prop default value instead.', vm);\n    } else if (!Object(__WEBPACK_IMPORTED_MODULE_3__util_index__[\"f\" /* isReserved */])(key)) {\n      // 非 $ 或 _ 开头属性\n      proxy(vm, '_data', key);\n    }\n  }\n  // observe data\n  Object(__WEBPACK_IMPORTED_MODULE_0__observer_index__[\"a\" /* observe */])(data, true /* asRootData */);\n}\n\nvar computedWatcherOptions = { lazy: true\n\n  /**\n   * 初始化计算属性\n   * \n   * @param {MVVM} vm \n   * @param {object} computed \n   */\n};function initComputed(vm, computed) {\n  var watchers = vm._computedWatchers = Object.create(null);\n\n  // computed key\n  for (var key in computed) {\n\n    // 获取计算属性声明\n    var userDef = computed[key];\n    // 检测声明是否符合要求\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (\"development\".NODE_ENV !== 'production' && getter == null) {\n      warn('Getter is missing for computed property \"' + key + '\".', vm);\n    }\n\n    // create key watchers\n    watchers[key] = new __WEBPACK_IMPORTED_MODULE_1__observer_watcher__[\"a\" /* default */](vm, getter || __WEBPACK_IMPORTED_MODULE_3__util_index__[\"g\" /* noop */], __WEBPACK_IMPORTED_MODULE_3__util_index__[\"g\" /* noop */], computedWatcherOptions);\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    }\n  }\n}\n\nfunction defineComputed(target, key, userDef) {\n  var shouldCache = true;\n  if (typeof userDef === 'function') {\n    // 只设置getter\n    sharedPropertyDefinition.get = shouldCache ? createComputedGetter(key) : userDef;\n    sharedPropertyDefinition.set = __WEBPACK_IMPORTED_MODULE_3__util_index__[\"g\" /* noop */];\n  } else {\n    // 同时设置 getter setter\n    sharedPropertyDefinition.get = userDef.get ? shouldCache && userDef.cache !== false ? createComputedGetter(key) : userDef.get : __WEBPACK_IMPORTED_MODULE_3__util_index__[\"g\" /* noop */];\n\n    sharedPropertyDefinition.set = userDef.set ? userDef.set : __WEBPACK_IMPORTED_MODULE_3__util_index__[\"g\" /* noop */];\n  }\n\n  if (\"development\".NODE_ENV !== 'production' && sharedPropertyDefinition.set === __WEBPACK_IMPORTED_MODULE_3__util_index__[\"g\" /* noop */]) {\n    sharedPropertyDefinition.set = function () {\n      warn('Computed property \"' + key + '\" was assigned to but it has no setter.', this);\n    };\n  }\n  // 定义 计算属性 \n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\n// 创建 计算属性的 getter\nfunction createComputedGetter(key) {\n\n  return function computedGetter() {\n    // this => vm\n    var watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      // dirty => true 立即计算\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n\n      // 如果存在视图指令引用计算属性\n      if (__WEBPACK_IMPORTED_MODULE_2__observer_dep__[\"a\" /* default */].target) {\n        // 将当前计算属性的依赖数据对象集 添加 当前的视图指令的 watcher\n        // 如果计算属性内部的数据依赖发生变化, 通知视图指令进行更新\n        watcher.depend();\n      }\n\n      return watcher.value;\n    }\n  };\n}\n\nfunction getData(data, vm) {\n  try {\n    return data.call(vm);\n  } catch (e) {\n    Object(__WEBPACK_IMPORTED_MODULE_3__util_index__[\"b\" /* handleError */])(e, vm, 'data()');\n    return {};\n  }\n}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_observer_watcher__ = __webpack_require__(0);\n\n\nfunction Compile(el, vm) {\n  this.$vm = vm;\n  this.$el = this.isElementNode(el) ? el : document.querySelector(el);\n  this.$template = vm.$options.template;\n\n  if (this.$el) {\n    this.$fragment = this.$template ? this.template2Fragment(this.$template) : this.node2Fragment(this.$el);\n    this.init();\n    this.$el.appendChild(this.$fragment);\n  }\n}\n\nCompile.prototype = {\n  constructor: Compile,\n  createFragment: function createFragment(html) {\n    var child;\n    var fragment = document.createDocumentFragment();\n    var el = document.createElement('div');\n\n    el.innerHTML = html;\n    while (child = el.firstChild) {\n      fragment.appendChild(child);\n    }\n    return fragment;\n  },\n  template2Fragment: function template2Fragment(template) {\n    var el = template.charAt(0) === '#' ? document.body.querySelector(template) : null;\n    if (!el) {\n      return this.createFragment(template);\n    }\n    if (el.tagName === 'SCRIPT') {\n      return this.createFragment(el.innerHTML);\n    } else {\n      return this.node2Fragment(el);\n    }\n  },\n  node2Fragment: function node2Fragment(el) {\n    var fragment = document.createDocumentFragment(),\n        child;\n\n    // 将原生节点拷贝到fragment\n    while (child = el.firstChild) {\n      fragment.appendChild(child);\n    }\n    return fragment;\n  },\n\n  init: function init() {\n    this.compileElement(this.$fragment);\n  },\n\n  compileElement: function compileElement(el) {\n    var _this = this;\n\n    var childNodes = el.childNodes;\n    [].slice.call(childNodes).forEach(function (node) {\n      var text = node.textContent;\n      // 文本插值表达式 {{}}\n      var reg = /\\{\\{(.*?)\\}\\}/;\n\n      if (_this.isElementNode(node)) {\n        _this.compile(node);\n      } else if (_this.isTextNode(node) && reg.test(text)) {\n        _this.compileText(node, RegExp.$1);\n      }\n\n      if (node.childNodes && node.childNodes.length) {\n        _this.compileElement(node);\n      }\n    });\n  },\n\n  compile: function compile(node) {\n    var _this2 = this;\n\n    var nodeAttrs = node.attributes;\n\n    [].slice.call(nodeAttrs).forEach(function (attr) {\n      var attrName = attr.name;\n      if (_this2.isDirective(attrName)) {\n        var exp = attr.value;\n        var dir = attrName.substring(2);\n        // 事件指令\n        if (_this2.isEventDirective(dir)) {\n          compileUtil.eventHandler(node, _this2.$vm, exp, dir);\n          // 普通指令\n        } else {\n          compileUtil[dir] && compileUtil[dir](node, _this2.$vm, exp);\n        }\n\n        node.removeAttribute(attrName);\n      }\n    });\n  },\n\n  compileText: function compileText(node, exp) {\n    compileUtil.text(node, this.$vm, exp);\n  },\n\n  isDirective: function isDirective(attr) {\n    return attr.indexOf('v-') == 0;\n  },\n\n  isEventDirective: function isEventDirective(dir) {\n    return dir.indexOf('on') === 0;\n  },\n\n  isElementNode: function isElementNode(node) {\n    return node.nodeType == 1;\n  },\n\n  isTextNode: function isTextNode(node) {\n    return node.nodeType == 3;\n  }\n};\n\n// 指令处理集合\nvar compileUtil = {\n  text: function text(node, vm, exp) {\n    this.bind(node, vm, exp, 'text');\n  },\n\n  html: function html(node, vm, exp) {\n    this.bind(node, vm, exp, 'html');\n  },\n\n  model: function model(node, vm, exp) {\n    this.bind(node, vm, exp, 'model');\n\n    var me = this,\n        val = this._getVMVal(vm, exp);\n    node.addEventListener('input', function (e) {\n      var newValue = e.target.value;\n      if (val === newValue) {\n        return;\n      }\n\n      me._setVMVal(vm, exp, newValue);\n      val = newValue;\n    });\n  },\n\n  class: function _class(node, vm, exp) {\n    this.bind(node, vm, exp, 'class');\n  },\n\n  bind: function bind(node, vm, exp, dir) {\n    // 策略模式\n    var updaterFn = updater[dir + 'Updater'];\n\n    // 直接运行获取结果\n    updaterFn && updaterFn(node, this._getVMVal(vm, exp));\n\n    // 新增订阅者\n    // watcher数据变化后执行更新视图指令\n    new __WEBPACK_IMPORTED_MODULE_0__core_observer_watcher__[\"a\" /* default */](vm, exp, function (value, oldValue) {\n      updaterFn && updaterFn(node, value, oldValue);\n    });\n  },\n\n  // 事件处理\n  eventHandler: function eventHandler(node, vm, exp, dir) {\n    var eventType = dir.split(':')[1],\n        fn = vm.$options.methods && vm.$options.methods[exp];\n\n    if (eventType && fn) {\n      node.addEventListener(eventType, fn.bind(vm), false);\n    }\n  },\n\n  _getVMVal: function _getVMVal(vm, exp) {\n    var val = vm;\n    exp = exp.split('.');\n    exp.forEach(function (k) {\n      val = val[k];\n    });\n    return val;\n  },\n\n  _setVMVal: function _setVMVal(vm, exp, value) {\n    var val = vm;\n    exp = exp.split('.');\n    exp.forEach(function (k, i) {\n      // 非最后一个key，更新val的值\n      if (i < exp.length - 1) {\n        val = val[k];\n      } else {\n        val[k] = value;\n      }\n    });\n  }\n};\n\nvar updater = {\n  textUpdater: function textUpdater(node, value) {\n    node.textContent = typeof value == 'undefined' ? '' : value;\n  },\n\n  htmlUpdater: function htmlUpdater(node, value) {\n    node.innerHTML = typeof value == 'undefined' ? '' : value;\n  },\n\n  classUpdater: function classUpdater(node, value, oldValue) {\n    var className = node.className;\n    className = className.replace(oldValue, '').replace(/\\s$/, '');\n\n    var space = className && String(value) ? ' ' : '';\n\n    node.className = className + space + value;\n  },\n\n  modelUpdater: function modelUpdater(node, value, oldValue) {\n    node.value = typeof value == 'undefined' ? '' : value;\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Compile);\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// app.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 77d05b30ec832f634764","import Dep, {pushTarget, popTarget} from './dep'\nimport {\n  hasOwn\n} from '../util/index'\n\n/**\n * \n * 观察员\n * @param {any} vm \n * @param {any} expOrFn \n * @param {any} cb \n * @param {any} options \n */\nfunction Watcher(vm, expOrFn, cb, options = {}) {\n  this.cb = cb;\n  this.vm = vm;\n  this.expOrFn = expOrFn;\n  this.depIds = {};\n  this.newDepIds = {};\n\n  vm._watchers.push(this);\n  this.lazy = !!options.lazy;\n  this.dirty = this.lazy;\n  \n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = this.parseGetter(expOrFn);\n  }\n\n  // 观察员 value\n  this.value = this.lazy\n  ? undefined\n  : this.get();\n}\n\nWatcher.prototype = {\n  constructor: Watcher,\n  update: function () {\n    // 如果为计算属性的watcher，则延缓更新。设置数据为dirty\n    if (this.lazy) {\n      this.dirty = true;\n    } else {\n      // 数据对象直接更新\n      this.run();\n    }\n  },\n  // 非计算属性获取value\n  run: function () {\n    var value = this.get();\n    var oldVal = this.value;\n    if (value !== oldVal) {\n      this.value = value;\n      // 更新视图的指令\n      this.cb.call(this.vm, value, oldVal);\n    }\n  },\n  \n  /**\n   * watcher 观察员 加入到某个被观察数据集合中\n   * @param {Dep} dep\n   */\n  addDep: function (dep) {\n    // 1. 每次调用run()的时候会触发相应属性的getter\n    // getter里面会触发dep.depend()，继而触发这里的addDep\n    // 2. 假如相应属性的dep.id已经在当前watcher的depIds里，说明不是一个新的属性，仅仅是改变了其值而已\n    // 则不需要将当前watcher添加到该属性的dep里\n    // 3. 假如相应属性是新的属性，则将当前watcher添加到新属性的dep里\n    // 如通过 vm.child = {name: 'a'} 改变了 child.name 的值，child.name 就是个新属性\n    // 则需要将当前watcher(child.name)加入到新的 child.name 的dep里\n    // 因为此时 child.name 是个新值，之前的 setter、dep 都已经失效，如果不把 watcher 加入到新的 child.name 的dep中\n    // 通过 child.name = xxx 赋值的时候，对应的 watcher 就收不到通知，等于失效了\n    // 4. 每个子属性的watcher在添加到子属性的dep的同时，也会添加到父属性的dep\n    // 监听子属性的同时监听父属性的变更，这样，父属性改变时，子属性的watcher也能收到通知进行update\n    // 这一步是在 this.get() --> this.getVMVal() 里面完成，forEach时会从父级开始取值，间接调用了它的getter\n    // 触发了addDep(), 在整个forEach过程，当前wacher都会加入到每个父级过程属性的dep\n    // 例如：当前watcher的是'child.child.name', 那么child, child.child, child.child.name这三个属性的dep都会加入当前watcher\n    if (!hasOwn(this.newDepIds, dep.id)) {\n      this.newDepIds[dep.id] = dep;\n      if (!hasOwn(this.depIds, dep.id)) {\n        dep.addSub(this);\n        this.depIds[dep.id] = dep;\n      }\n    }\n  },\n\n  /**\n   * Evaluate the getter, and re-collect dependencies.\n   */\n  get: function () {\n    // 设置当前的 Watcher \n    pushTarget(this);\n    const vm = this.vm;\n\n    // 获取value的同时\n    // 为数据的观察者添加watcher\n    // 如果为computed 计算属性, 则会出发内部多次的 getter 调用\n    // 则内部的数据观察对象会收集同一个 watcher\n    let value = this.getter && this.getter.call(vm, vm);\n\n    popTarget();\n    this.cleanupDeps();\n    return value;\n  },\n  /**\n   * Evaluate the value of the watcher.\n   * This only gets called for lazy watchers.\n   */\n  evaluate: function () {\n    this.value = this.get();\n    this.dirty = false;\n  },\n\n  /**\n   * Depend on all deps collected by this watcher.\n   */\n  depend: function () {\n    let maps = Object.keys(this.depIds);\n    maps.forEach((key) => {\n      this.depIds[key].depend();\n    });\n  },\n  /**\n   * Clean up for dependency collection.\n   */\n  cleanupDeps: function () {\n    let keys = Object.keys(this.depIds);\n    keys.forEach((key) => {\n      const dep = this.depIds[key];\n      // 删除旧的观察者依赖\n      if (!hasOwn(this.newDepIds, dep.id)) {\n        dep.removeSub(this);\n      }\n    });\n\n    this.depIds = this.newDepIds;\n    this.newDepIds = Object.create(null);\n  },\n  parseGetter: function (exp) {\n    if (/[^\\w.$]/.test(exp)) {\n      return;\n    }\n    var exps = exp.split('.');\n\n    /**\n     * @param {object} obj\n     */\n    return function (obj) {\n      for (var i = 0, len = exps.length; i < len; i++) {\n        if (!obj) return;\n        obj = obj[exps[i]];\n      }\n      return obj;\n    }\n  }\n};\n\nexport default Watcher;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/observer/watcher.js","var uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n * 观察员允许多个指令订阅者订阅\n */\n\nfunction Dep(name) {\n  this.id = uid++;\n  this.subs = [];\n}\n\nDep.prototype = {\n\n  constructor: Dep,\n\n  /**\n   * @param {Wathcer} sub\n   */\n  addSub: function (sub) {\n    this.subs.push(sub);\n  },\n\n  removeSub: function (sub) {\n    var index = this.subs.indexOf(sub);\n    if (index != -1) {\n      this.subs.splice(index, 1);\n    }\n  },\n\n  // 数据对象 注入 comipler 的 watcher\n  // 如果是计算属性的 watcher, 则会多个数据对象 注入一个watcher\n  depend: function () {\n    if (Dep.target) {\n      Dep.target.addDep(this);\n    }\n  },\n\n  notify: function () {\n    this.subs.forEach(function (sub) {\n      sub.update();\n    });\n  }\n};\n\n// the current target watcher being evaluated.\n// this is globally unique because there could be only one\n// watcher being evaluated at any time.\nDep.target = null;\n\nconst targetStack = [];\n\nexport function pushTarget (_target) {\n  if (Dep.target) {\n    targetStack.push(Dep.target);\n  }\n  Dep.target = _target;\n}\n\nexport function popTarget () {\n  Dep.target = targetStack.pop();\n}\n\nexport default Dep;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/observer/dep.js","import { noop } from 'src/shared/util'\n\nexport let warn = noop\n\nif (process.env.NODE_ENV !== 'production') {\n\n  warn = (msg, vm) => {\n    if (hasConsole && (!config.silent)) {\n      console.error(`[MVVM warn]: ${msg}`)\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/util/debug.js","/** @module shared/util */\n\nconst _toString = Object.prototype.toString\nconst hasOwnProperty = Object.prototype.hasOwnProperty\n\n/**\n * Mix properties into target object.\n */\nexport function extend (to, _from) {\n  for (const key in _from) {\n    to[key] = _from[key]\n  }\n  return to\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nexport function isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nexport function isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * Perform no operation.\n */\nexport function noop () {}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nexport function makeMap (\n  str,\n  expectsLowerCase\n){\n  const map = Object.create(null)\n  const list = str.split(',')\n  for (let i = 0; i < list.length; i++) {\n    map[list[i]] = true\n  }\n  return expectsLowerCase\n    ? val => map[val.toLowerCase()]\n    : val => map[val]\n}\n\n/**\n * Check whether the object has the property.\n */\nexport function hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/util.js","// Browser environment sniffing\nexport const inBrowser = typeof window !== 'undefined'\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/util/env.js","import Dep from './dep'\nimport {\n  def,\n  hasOwn,\n  isObject\n} from '../util/index'\n\n\nfunction Observer(value) {\n  this.value = value;\n\n  // value 对象观察类, \n  this.dep = new Dep();\n\n  this.vmCount = 0; // number of vms that has this object as root $data\n  def(value, '__ob__', this);\n\n  if (Array.isArray(value)) {\n    // TODO: observeArray\n  } else {\n    this.walk(value);\n  }\n}\n\nObserver.prototype = {\n  constructor: Observer,\n  walk: function (obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n      defineReactive(obj, keys[i], obj[keys[i]]);\n    }\n  }\n};\n\n/**\n * Define a reactive property on an Object.\n */\nexport function defineReactive(obj, key, val) {\n\n  // 非对象属性观察类\n  const dep = new Dep();\n  \n  const property = Object.getOwnPropertyDescriptor(obj, key);\n\n  if (property && property.configurable === false) {\n    return;\n  }\n\n  // cater for pre-defined getter/setters\n  const getter = property && property.get;\n  const setter = property && property.set;\n\n  // 深度观察\n  let childOb = observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter() {\n      const value = getter ? getter.call(obj) : val\n      if (Dep.target) {\n        // 将当前的 watcher 观察员 传递至数据对象的观察集合中\n        // 如果已经存在于数据集合中, 则忽略\n        dep.depend();\n        if (childOb) {\n          // 将当前的 watcher 传递给子对象的 数据对象的观察员集合\n          childOb.dep.depend();\n        }\n      }\n      return val;\n    },\n    set: function reactiveSetter(newVal) {\n      const value = getter ? getter.call(obj) : val;\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return;\n      }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n\n      // 如果为对象，则创建新的 __ob__ 对象\n      childOb = observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * 为 对象 内置 __ob__ 观察员\n * 已存在观察员\n */\nexport function observe(value, asRootData /* 是否为rootData */) {\n  if (!isObject(value)) {\n    return;\n  }\n  let ob;\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__\n  } else {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob;\n};\n\nexport default Observer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/observer/index.js","import MVVM from 'mvvm'\n\nconst template = `\n<h2>Welcome {{user.firstname}} <span>{{user.lastname}}</span></h2>\n<p>computed: {{fullname}}</p>\n<input type=\"text\" v-model=\"user.lastname\">\n<button v-on:click=\"sayHi\">change model</button>\n`;\n\nconst vm = new MVVM({\n  el: '#app',\n  template,\n  data: {\n    word: 'Hello World!',\n    user: {\n      firstname: '李', \n      lastname: '彦龙'\n    }\n  },\n  computed: {\n    fullname: function () {\n      // getter 调用\n      return this.user.firstname + ' ' + this.user.lastname;\n    }\n  },\n  methods: {\n    sayHi: function() {\n      this.word = 'Hi, everybody!';\n    }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./example/main.js","import MVVM from './instance/index'\n\n// add prototype\nObject.defineProperty(MVVM.prototype, '$isServer', {\n  get () {\n    return typeof window === 'undefined'\n  }\n})\n\nMVVM.version = '1.0.0';\n\nexport default MVVM;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","import Watcher from 'src/core/observer/watcher'\nimport {observe} from 'src/core/observer'\nimport initMixin from './init'\n\n/**\n * Create a MVVM\n * @class\n */\nfunction MVVM(options) {\n    if (process.env.NODE_ENV !== 'production' &&\n        !(this instanceof MVVM)) {\n        console.warn('Vue is a constructor and should be called with the `new` keyword')\n    }\n    this._init(options);\n}\n\nMVVM.prototype = {\n    constructor: MVVM,\n    $watch: function(key, cb, options) {\n        new Watcher(this, key, cb);\n    }\n};\n\ninitMixin(MVVM);\n\nexport default MVVM;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/instance/index.js","\n/**\n * Check if a string starts with $ or _\n */\nexport function isReserved (str) {\n  const c = (str + '').charCodeAt(0)\n  return c === 0x24 || c === 0x5F\n}\n\n/**\n * Define a property.\n */\nexport function def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/util/lang.js","import { inBrowser } from './env'\nimport {warn} from './debug'\n\nexport function handleError (err, vm, info) {\n\n  if (process.env.NODE_ENV !== 'production') {\n    warn(`Error in ${info}: \"${err.toString()}\"`, vm)\n  }\n  /* istanbul ignore else */\n  if (inBrowser && typeof console !== 'undefined') {\n    console.error(err)\n  } else {\n    throw err\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/util/error.js","import { initState } from './state'\nimport Compile from 'src/compiler/index'\n\nlet uid = 0;\n\nexport default function initMixin (MVVM) {\n\n  MVVM.prototype._init = function (options) {\n    const vm = this;\n    vm._uid = uid++;\n    vm._isMVVM = true;\n    vm.$options = options || {};\n    \n    initState(vm);\n    this.$compile = new Compile(this.$options.el || document.body, this)\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/instance/init.js","import {observe} from '../observer/index'\nimport Watcher from '../observer/watcher'\nimport Dep from '../observer/dep'\nimport {\n  handleError, \n  isPlainObject,\n  hasOwn,\n  noop,\n  isReserved\n} from '../util/index'\n\nconst sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\n\n/**\n * 属性代理\n * target[sourceKey].key => target.key\n */\nexport function proxy (target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key];\n  }\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val;\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nexport function initState (vm) {\n  const opts = vm.$options;\n\n  // new Watcher(vm) to push vm._watchers\n  vm._watchers = [];\n\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n\n  if(opts.computed) {\n    initComputed(vm, opts.computed);\n  }\n}\n\n/**\n * 代理 vm._data.xxx 属性 为 vm.xxx\n * 给 vm._data 属性遍历, 设置为观察者\n */\nfunction initData (vm) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {}\n  if (!isPlainObject(data)) {\n    data = {}\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  const keys = Object.keys(data)\n  const props = vm.$options.props\n  const methods = vm.$options.methods\n  let i = keys.length\n  while (i--) {\n    const key = keys[i]\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          `method \"${key}\" has already been defined as a data property.`,\n          vm\n        );\n      }\n    }\n\n    // 优先处理prop属性\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        `The data property \"${key}\" is already declared as a prop. ` +\n        `Use prop default value instead.`,\n        vm\n      );\n    } else if (!isReserved(key)) {\n      // 非 $ 或 _ 开头属性\n      proxy(vm, `_data`, key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n\n\nconst computedWatcherOptions = { lazy: true }\n\n/**\n * 初始化计算属性\n * \n * @param {MVVM} vm \n * @param {object} computed \n */\nfunction initComputed (vm, computed) {\n  const watchers = vm._computedWatchers = Object.create(null);\n\n  // computed key\n  for (const key in computed) {\n    \n    // 获取计算属性声明\n    const userDef = computed[key];\n    // 检测声明是否符合要求\n    const getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        `Getter is missing for computed property \"${key}\".`,\n        vm\n      );\n    }\n    \n    // create key watchers\n    watchers[key] = new Watcher(\n      vm,\n      getter || noop,\n      noop,\n      computedWatcherOptions\n    );\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef)\n    } \n    \n  }\n}\n\nexport function defineComputed (target, key, userDef) {\n  const shouldCache = true;\n  if (typeof userDef === 'function') {\n    // 只设置getter\n    sharedPropertyDefinition.get = shouldCache\n      ? createComputedGetter(key)\n      : userDef\n    sharedPropertyDefinition.set = noop;\n  } else {\n    // 同时设置 getter setter\n    sharedPropertyDefinition.get = userDef.get\n      ? shouldCache && userDef.cache !== false\n        ? createComputedGetter(key)\n        : userDef.get\n      : noop;\n\n    sharedPropertyDefinition.set = userDef.set\n      ? userDef.set\n      : noop;\n  }\n\n  if (process.env.NODE_ENV !== 'production' &&\n      sharedPropertyDefinition.set === noop) {\n    sharedPropertyDefinition.set = function () {\n      warn(\n        `Computed property \"${key}\" was assigned to but it has no setter.`,\n        this\n      );\n    }\n  }\n  // 定义 计算属性 \n  Object.defineProperty(target, key, sharedPropertyDefinition)\n}\n\n\n// 创建 计算属性的 getter\nfunction createComputedGetter (key) {\n  \n  return function computedGetter () {\n    // this => vm\n    const watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      // dirty => true 立即计算\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n\n      // 如果存在视图指令引用计算属性\n      if (Dep.target) {\n        // 将当前计算属性的依赖数据对象集 添加 当前的视图指令的 watcher\n        // 如果计算属性内部的数据依赖发生变化, 通知视图指令进行更新\n        watcher.depend();\n      }\n\n      return watcher.value;\n    }\n  }\n}\n\nfunction getData (data, vm) {\n  try {\n    return data.call(vm);\n  } catch (e) {\n    handleError(e, vm, `data()`);\n    return {};\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/instance/state.js","import Watcher from '../core/observer/watcher'\n\nfunction Compile(el, vm) {\n  this.$vm = vm;\n  this.$el = this.isElementNode(el) ? el : document.querySelector(el);\n  this.$template = vm.$options.template;\n\n  if (this.$el) {\n    this.$fragment = this.$template ?\n      this.template2Fragment(this.$template) : this.node2Fragment(this.$el);\n    this.init();\n    this.$el.appendChild(this.$fragment);\n  }\n}\n\nCompile.prototype = {\n  constructor: Compile,\n  createFragment: function (html) {\n    var child;\n    var fragment = document.createDocumentFragment();\n    var el = document.createElement('div');\n\n    el.innerHTML = html;\n    while (child = el.firstChild) {\n      fragment.appendChild(child);\n    }\n    return fragment;\n  },\n  template2Fragment: function (template) {\n    var el = template.charAt(0) === '#' ? document.body.querySelector(template) : null;\n    if (!el) {\n      return this.createFragment(template);\n    }\n    if (el.tagName === 'SCRIPT') {\n      return this.createFragment(el.innerHTML);\n    } else {\n      return this.node2Fragment(el);\n    }\n  },\n  node2Fragment: function (el) {\n    var fragment = document.createDocumentFragment(),\n      child;\n\n    // 将原生节点拷贝到fragment\n    while (child = el.firstChild) {\n      fragment.appendChild(child);\n    }\n    return fragment;\n  },\n\n  init: function () {\n    this.compileElement(this.$fragment);\n  },\n\n  compileElement: function (el) {\n    var childNodes = el.childNodes;\n    [].slice.call(childNodes).forEach((node) => {\n      var text = node.textContent;\n      // 文本插值表达式 {{}}\n      var reg = /\\{\\{(.*?)\\}\\}/;\n\n      if (this.isElementNode(node)) {\n        this.compile(node);\n\n      } else if (this.isTextNode(node) && reg.test(text)) {\n        this.compileText(node, RegExp.$1);\n      }\n\n      if (node.childNodes && node.childNodes.length) {\n        this.compileElement(node);\n      }\n    });\n  },\n\n  compile: function (node) {\n    var nodeAttrs = node.attributes;\n\n    [].slice.call(nodeAttrs).forEach((attr) => {\n      var attrName = attr.name;\n      if (this.isDirective(attrName)) {\n        var exp = attr.value;\n        var dir = attrName.substring(2);\n        // 事件指令\n        if (this.isEventDirective(dir)) {\n          compileUtil.eventHandler(node, this.$vm, exp, dir);\n          // 普通指令\n        } else {\n          compileUtil[dir] && compileUtil[dir](node, this.$vm, exp);\n        }\n\n        node.removeAttribute(attrName);\n      }\n    });\n  },\n\n  compileText: function (node, exp) {\n    compileUtil.text(node, this.$vm, exp);\n  },\n\n  isDirective: function (attr) {\n    return attr.indexOf('v-') == 0;\n  },\n\n  isEventDirective: function (dir) {\n    return dir.indexOf('on') === 0;\n  },\n\n  isElementNode: function (node) {\n    return node.nodeType == 1;\n  },\n\n  isTextNode: function (node) {\n    return node.nodeType == 3;\n  }\n};\n\n// 指令处理集合\nvar compileUtil = {\n  text: function (node, vm, exp) {\n    this.bind(node, vm, exp, 'text');\n  },\n\n  html: function (node, vm, exp) {\n    this.bind(node, vm, exp, 'html');\n  },\n\n  model: function (node, vm, exp) {\n    this.bind(node, vm, exp, 'model');\n\n    var me = this,\n      val = this._getVMVal(vm, exp);\n    node.addEventListener('input', function (e) {\n      var newValue = e.target.value;\n      if (val === newValue) {\n        return;\n      }\n\n      me._setVMVal(vm, exp, newValue);\n      val = newValue;\n    });\n  },\n\n  class: function (node, vm, exp) {\n    this.bind(node, vm, exp, 'class');\n  },\n\n  bind: function (node, vm, exp, dir) {\n    // 策略模式\n    var updaterFn = updater[dir + 'Updater'];\n\n    // 直接运行获取结果\n    updaterFn && updaterFn(node, this._getVMVal(vm, exp));\n\n    // 新增订阅者\n    // watcher数据变化后执行更新视图指令\n    new Watcher(vm, exp, function (value, oldValue) {\n      updaterFn && updaterFn(node, value, oldValue);\n    });\n  },\n\n  // 事件处理\n  eventHandler: function (node, vm, exp, dir) {\n    var eventType = dir.split(':')[1],\n      fn = vm.$options.methods && vm.$options.methods[exp];\n\n    if (eventType && fn) {\n      node.addEventListener(eventType, fn.bind(vm), false);\n    }\n  },\n\n  _getVMVal: function (vm, exp) {\n    var val = vm;\n    exp = exp.split('.');\n    exp.forEach(function (k) {\n      val = val[k];\n    });\n    return val;\n  },\n\n  _setVMVal: function (vm, exp, value) {\n    var val = vm;\n    exp = exp.split('.');\n    exp.forEach(function (k, i) {\n      // 非最后一个key，更新val的值\n      if (i < exp.length - 1) {\n        val = val[k];\n      } else {\n        val[k] = value;\n      }\n    });\n  }\n};\n\n\nvar updater = {\n  textUpdater: function (node, value) {\n    node.textContent = typeof value == 'undefined' ? '' : value;\n  },\n\n  htmlUpdater: function (node, value) {\n    node.innerHTML = typeof value == 'undefined' ? '' : value;\n  },\n\n  classUpdater: function (node, value, oldValue) {\n    var className = node.className;\n    className = className.replace(oldValue, '').replace(/\\s$/, '');\n\n    var space = className && String(value) ? ' ' : '';\n\n    node.className = className + space + value;\n  },\n\n  modelUpdater: function (node, value, oldValue) {\n    node.value = typeof value == 'undefined' ? '' : value;\n  }\n};\n\nexport default Compile;\n\n\n\n// WEBPACK FOOTER //\n// ./src/compiler/index.js"],"sourceRoot":""}