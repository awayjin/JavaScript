## 3-02 CORS 跨域请求的限制与解决
access-control-allow-origin：'*'

jsonp - 利用 link, script, img 标签允许跨域的原理来实现的。

标签的src属性并不被同源策略所约束.

CORS 预请求
- access-control-allow-origin 请求头限制，不允许自定义头 header
- 允许的方法 GET\POST\Head
- 允许Content-Type 内容类型
    - text/plain 文本
    - multipart/form-data 
    - application/x-www-form-urlencoded 表单
    - 除了这三个之外也需要预请求验证
    
'access-control-allow-origin': 'http://localhost:3000',
// 允许自定义头
'access-control-allow-headers': 'X-Test-CORS',
// 允许的方法
'access-control-allow-methods': 'PUT, POST, Delete, GET',
// 最长时间，10s 内再发请求就不用预请求了
'access-control-max-age': '10'
// 'access-control-allow-origin': '*'

## 3-10 csp 内容安全策略

"内容安全策略"(Content Security Policy,缩写 CSP)

作用:
- 限制资源获取
- 报告资源获取权限

限制方式
- default-src 限制全局
- 制定资源类型

资源类型: 
- connect-src 请求发向目标
- manifest-src
- img-src 图片
- font-src
- frame-src
- script-src 脚本
- style-src 

限制行内脚本执行：
'Content-Security-Policy': 'default-src http: https:'

只能加载本域名下的 js

服务端设置
```
 res.writeHead(200, {
      'Content-Type': 'text/html',
      // 内容安全策略
      'Content-Security-Policy': 'default-src http: https:' // 限制行内脚本执行
      'Content-Security-Policy': 'default-src \'self\'' // 只是本域名下执行
      'Content-Security-Policy': 'default-src \'self\' https://cdn.bootcss.com' // 允许这个域名下的内容来执行
      'Content-Security-Policy': 'form-action' // 限制表单提交到别的域名
      'Content-Security-Policy': 'script-src' // 限制 script-src
      'Content-Security-Policy': 'script-src \'self\'; report-uri /report' // 如果不是我们希望执行的向服务器报告
      'Content-Security-Policy-Report-Only': 'script-src \'self\'; report-uri /report' // 加载了，做一下 report 的工作
    })
```

meta 设置
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src https://*; child-src 'none';">


## 3-4 cache-control
可缓存性
public
private
no-cache 不缓存, 可以用缓存，但要到服务器验证过。
no-store 彻底不用缓存。
max-age=<seconds>
s-maxage=<seconds> 代理服务器
max-stale=<seconds> 发起端
must-revalidate 
proxy-revalidate 
no-transform 不允许代理服务器缓存。

## 3-5 缓存验证 Last-Modified 和 Etag 的使用
- Last-Modified 上次修改时间，配合 If-Modified-Since。对比上次修改时间以验证资源是否需要更新。

- ETag 数据签名, If-None-Match。对比资源的签名判断是否使用缓存。