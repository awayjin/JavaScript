<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>
<style type="text/css">
* { margin:0; padding:0;}
body { font-size:12px;}
.comment { margin-top:10px; padding:10px; border:1px solid #ccc;background:#DDD;}
.comment h6 { font-weight:700; font-size:14px;}
.para { margin-top:5px; text-indent:2em;background:#DDD;}
</style>
 <!--   引入jQuery -->
<script src="../scripts/jquery-1.3.1.js" type="text/javascript"></script>
<script src="../scripts/jquery.validate.js" type="text/javascript"></script>

<script type="text/javascript">

var ev = eval('({"a":"ccc"})');
//alert(ev.a)

var obj1 = new Object();
var obj2 = obj1;
//var obj1 = []
//obj1.name = 'jinwei';
//obj1.name = null;
obj1 = [];
//alert(obj2); 
//alert(obj1); 

var j1 = 2;
var j2 = j1;
var j1 = null;
//alert(j2);
//alert(obj2);

function sum(num1, num2){
	return num1 + num2;
}
function callSum1(num1, num2){
	return sum.apply(this, arguments);	
	//return sum(num1, num2);	
}
//alert(callSum1(10, 20));

var color = "red";
var o = { color: "green"};
function sayColor(){
 // alert(this.color);	
}
sayColor();
sayColor.apply(o);//扩大了函数的作用域

function factorial(num){
	if(num <= 1){
		return 1;	
	}else{
		return num * arguments.callee(num-1);	
	}
}
var trueFactorial = factorial;
//var trueFactorial = function(){
//		return 0;
//};
factorial = function(){
		return 0;
};
//alert(trueFactorial(5));
//alert(factorial(5));
</script>
</head>
<body>
<form id="form1" method="post" action="">
 <p>评论:</p>
 <p>姓名: <input type="text" name="username" id="username" /></p>
 <p>内容: <textarea name="content" id="content"  rows="2" cols="20"></textarea></p>
 <p>E-mail: <input type="text" name="email" id="email" /></p>
 <p>邮政编码<input type="text" name="isZipCode" id="isZipCode" /></p>
 <p>一个字母<input type="text" name="codeOne" id="" /></p>
 <p>
<div class="login_error"></div>
<input type="submit" value="提交" />

 </p>
 
</form>

<div  class='comment'>已有评论：</div>
<div id="resText" >
</div>

<form name="form2" id="form2" method="post" action="">
<dl>
  <dt>用户名：</dt>
  <dd><input name="txtUserName" id="txtUserName" type="text" class="input1" /></dd>
</dl>
</form>
<div class="ad" id="picIndexPop" style="display:none">
	
</div>

</body>
</html>
<script type="text/javascript">
$(function() {
//表单验证JS
    $("#form2").validate({
        //出错时添加的标签
        errorElement: "span",
        rules: {
            txtUserName: {
                required: true,
                minlength: 3,
                maxlength: 16,
                remote: {
                    type: "post",
                    url: "1serialize.php",
                    data: {
                        username: function() {
                            return $("#txtUserName").val();
                        }
                    },
                    dataType: "html",
                    dataFilter: function(data, type) {
						alert(data)
						$("#txtUserName").append("<span>"+data+"</span>");
//                        if (data == "true"){
//							alert(333);
//                            return true;
//						}else{
//							alert(data);
//                            return false;
//						}
                    }
                }
            }
        },
        success: function(label) {
            //正确时的样式
            label.text(" ").addClass("success");
        },
        messages: {
            txtUserName: {
                required: "请输入用户名，3-16个字符（字母、数字、下划线），注册后不能更改",
                minlength: "用户名长度不能小于3个字符",
                maxlength: "用户名长度不能大于16个字符",
               remote: "用户名不可用"
            }
        }

    });
});
</script>
<script type="text/javascript">
	$(function(){
//		$("form1").submit(function(){
//				$.post("1serialize.php", {
//					username: $("#username").val(),
//					content: $("#content").val()	
//				 }, function(data, textStatus){
//					$("#resText").html(data);
//				});
//		});
	});
	
	$("#form1").validate({
		rules: {
			username : "required",
			email: {
				required: true,
				email: true,
			},
			content: {
				required: true,
				minlength: 6,
				maxlength: 10	
			},
			codeOne: { //一个字母(自定义)
				af:["a","f"]
			},
			isZipCode: {//邮箱验证(自定义)
				zipCode: []
			},
			errorPlacement: function(error, element) {
				element.parent().parent().next(".login_error").html(error).show();
			}


		},
//		remote: {
//			url: "1serialize.php",     //后台处理程序
//			type: "post",               //数据发送方式
//			dataType: "html",           //接受数据格式   
//			data: {                     //要传递的数据
//				username: function() {
//					return $("#username").val();
//				}
//			}
//		}
//,
		success: function(){
//				$.post("1serialize.php", {
//					username: $("#username").val(),
//					content: $("#content").val()	
//				 }, function(data, textStatus){
//					$("#resText").html(data);
//				});
		},
//		submitHandler: function(){
//			alert('successed');
//			form.submit()	
//		}
	});

//jQuery.validator.addMethod("zipCode", function(value, element) {   
//    var tel = /^[0-9]{6}$/;
//    return this.optional(element) || (tel.test(value));
//}, "请正确填写您的邮政编码");

$.validator.addMethod("zipCode", function(value, element){
	var tel = /^[0-9]{6}$/;
	//return this.optional(element) || (tel.test(value));
	return (tel.test(value))
	
}, "请正确填写您的邮政编码")

$.validator.addMethod("af",function(value,element,params){

   if(value.length>1){
		return false;
   }
   if(value>=params[0] && value<=params[1]){
		return true;
   }else{
		return false;
   }

}, "必须是一个字母,且a-f");
	
$.validator.setDefaults({
	//submitHandler: function(form) { alert("submitted!");form.submit(); }
});

	
//		$(function(){
//	   $("#send").click(function(){
//			$.get("1serialize.php", $("#form1").serialize() , function (data, textStatus){
//                        $("#resText").html(data); // 把返回的数据添加到页面上
//					}
//			);
//	   })
//	})

// 邮政编码验证   
//vale = $("#isZipCode").val();
//jQuery.validator.addMethod(function(value, element) {   
//    var tel = /^[0-9]{6}$/;
//    return this.optional(element) || (tel.test(value));
//}, "请正确填写您的邮政编码");
</script>